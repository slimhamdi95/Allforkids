{% extends '@Transport/layout.html.twig' %}

{% block body %}
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

    <div class="middle_inner">
    <style type="text/css">.headline_color {
            background-color:;
        }
        .headline_aligner,
        .cmsmasters_breadcrumbs_aligner {
            min-height:250px;
        }

        #cmsmasters_row_5aa7fade7c3e5 {
            background-image: url({{ asset('bundles/transport/wp-content/uploads/2015/07/Kids.png') }});
            background-position: top center;
            background-repeat: repeat;
            background-attachment: scroll;
            background-size: auto;
        }
        #cmsmasters_heading_5aa7fb56a905f {
            text-align:left;
            margin-top:70px;
            margin-bottom:50px;
        }

        #cmsmasters_heading_5aa7fb56a905f .cmsmasters_heading {
            text-align:left;
        }

        #cmsmasters_heading_5aa7fb56a905f .cmsmasters_heading, #cmsmasters_heading_5aa7fb56a905f .cmsmasters_heading a {
            font-weight:300;
            font-style:normal;
        }

        #cmsmasters_heading_5aa7fb56a905f .cmsmasters_heading_divider {
        }


        #cmsmasters_tabs_list_item_5aa7fb56a9329 a {
            background-color:#f6c127;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9329:before {
            border-top-color:#f6c127;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a93c8 a {
            background-color:#0187a4;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a93c8:before {
            border-top-color:#0187a4;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a945f a {
            background-color:#01a491;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a945f:before {
            border-top-color:#01a491;
        }

        #cmsmasters_row_5aa7fb56a94fb .cmsmasters_row_outer_parent {
            padding-top: 0px;
        }


        #cmsmasters_divider_5aa7fb56a9588 {
            border-bottom-width:1px;
            border-bottom-style:solid;
            padding-top:20px;
            margin-bottom:20px;
        }

        #cmsmasters_heading_5aa7fb56a9718 {
            text-align:left;
            margin-top:50px;
            margin-bottom:50px;
        }

        #cmsmasters_heading_5aa7fb56a9718 .cmsmasters_heading {
            text-align:left;
        }

        #cmsmasters_heading_5aa7fb56a9718 .cmsmasters_heading, #cmsmasters_heading_5aa7fb56a9718 .cmsmasters_heading a {
            font-weight:300;
            font-style:normal;
        }

        #cmsmasters_heading_5aa7fb56a9718 .cmsmasters_heading_divider {
        }


        #cmsmasters_tabs_list_item_5aa7fb56a97cb a {
            background-color:#01a491;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a97cb:before {
            border-left-color:#01a491;
            border-right-color:#01a491;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9873 a {
            background-color:#f96c7e;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9873:before {
            border-left-color:#f96c7e;
            border-right-color:#f96c7e;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a990e a {
            background-color:#0187a4;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a990e:before {
            border-left-color:#0187a4;
            border-right-color:#0187a4;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a99a3 a {
            background-color:#f6c127;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a99a3:before {
            border-left-color:#f6c127;
            border-right-color:#f6c127;
        }

        #cmsmasters_row_5aa7fb56a9a40 .cmsmasters_row_outer_parent {
            padding-top: 0px;
        }


        #cmsmasters_divider_5aa7fb56a9ae1 {
            border-bottom-width:1px;
            border-bottom-style:solid;
            padding-top:70px;
            margin-bottom:70px;
        }

        #cmsmasters_row_5aa7fb56a9b3e .cmsmasters_row_outer_parent {
            padding-bottom: 70px;
        }


        #cmsmasters_heading_5aa7fb56a9ce0 {
            text-align:left;
            margin-top:0px;
            margin-bottom:50px;
        }

        #cmsmasters_heading_5aa7fb56a9ce0 .cmsmasters_heading {
            text-align:left;
        }

        #cmsmasters_heading_5aa7fb56a9ce0 .cmsmasters_heading, #cmsmasters_heading_5aa7fb56a9ce0 .cmsmasters_heading a {
            font-weight:300;
            font-style:normal;
        }

        #cmsmasters_heading_5aa7fb56a9ce0 .cmsmasters_heading_divider {
        }


        #cmsmasters_tabs_list_item_5aa7fb56a9db2 a {
            background-color:#01a491;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9db2:before {
            border-left-color:#01a491;
            border-right-color:#01a491;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9e75 a {
            background-color:#f96c7e;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9e75:before {
            border-left-color:#f96c7e;
            border-right-color:#f96c7e;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9f39 a {
            background-color:#0187a4;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9f39:before {
            border-left-color:#0187a4;
            border-right-color:#0187a4;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9ffc a {
            background-color:#f6c127;
        }

        #cmsmasters_tabs_list_item_5aa7fb56a9ffc:before {
            border-left-color:#f6c127;
            border-right-color:#f6c127;
        }
    </style>
    <div id="cmsmasters_row_5aa7fade7c3e5" class="cmsmasters_row cmsmasters_color_scheme_default cmsmasters_row_top_default cmsmasters_row_bot_default cmsmasters_row_boxed" >
        <div class="cmsmasters_row_outer_parent">
            <div class="cmsmasters_row_outer">
                <div class="cmsmasters_row_inner">
                    <div class="cmsmasters_row_margin">
                        <div class="cmsmasters_column one_first">
                            <div class="cmsmasters_tabs tabs_mode_tab" style="text-align: center;padding-top: 20px;">
                                <li id="cmsmasters_tabs_list_item_5aa7fb56a926e" class="cmsmasters_tabs_list_item current_tab">
                                    <a href="{{ path('transport_index') }}">Back to the list</a>
                                </li>
                                {% if transport.getIdCreateur() ==  user %}
                                    <li id="cmsmasters_tabs_list_item_5aa7fb56a9329" class="cmsmasters_tabs_list_item">
                                        <a href="{{ path('transport_edit', { 'idTransport': transport.idTransport }) }}">Edit</a>
                                    </li>
                                {% endif %}
                                {% if transport.getIdCreateur() !=  user %}
                                    <li id="cmsmasters_tabs_list_item_5aa7fb56a93c8" class="cmsmasters_tabs_list_item">
                                        <a href="{{ path('transport_joindre',{'idTransport':transport.getIdTransport()}) }}" > Inscrire maintenant</a>
                                    </li>
                                    <li id="cmsmasters_tabs_list_item_5aa7fb56a945f" class="cmsmasters_tabs_list_item">
                                        <a href="{{ path ('transport_delete_joindre',{'idTransport':transport.getIdTransport()}) }}" >annuler l'inscription</a>
                                    </li>
                                {% endif %}
                                {% if transport.getIdCreateur() ==  user %}
                                <li id="cmsmasters_tabs_list_item_5aa7fb56a945f" class="cmsmasters_tabs_list_item">
                                    {{ form_start(delete_form) }}
                                    <input type="submit" value="Delete">
                                    {{ form_end(delete_form) }}
                                </li>
                                {% endif %}
                            </div>
                            <!--_________________________ Start Content _________________________ -->
                            <div class="middle_content entry" role="main">
                                <div id="tribe-events-pg-template" class="clearfix">
                                    <div id="tribe-events" class="tribe-no-js" data-live_ajax="1" data-datepicker_format="0" data-category="" data-featured=""><div class="tribe-events-before-html"></div><span class="tribe-events-ajax-loading"><img class="tribe-events-spinner-medium" src="../../wp-content/plugins/the-events-calendar/src/resources/images/tribe-loading.gif" alt="Loading Events" /></span>
                                        <div id="tribe-events-content" class="tribe-events-single vevent hentry">
                                            <div class="tribe-events-single-section tribe-events-event-meta cmsmasters_single_event_meta cmsmasters_event_meta_info_col_3">
                                                <div class="tribe-events-meta-group tribe-events-meta-group-details">
                                                    <h3 class="tribe-events-single-section-title" style="color: white">Details</h3>
                                                    <div class="cmsmasters_event_meta_info">

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title"style="color: white">Date:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr">
					<abbr class="tribe-events-abbr updated published dtstart" title="2017-11-17" style="color: white"> {% if transport.date %}{{ transport.date|date('Y-m-d') }}{% endif %} </abbr>
				</span>
                                                        </div>

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Frais:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr tribe-events-event-cost" style="color: white">{{ transport.frais }}</span>
                                                        </div>

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Nombre de Place:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr tribe-events-event-cost" style="color: white">{{ transport.place }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="tribe-events-meta-group tribe-events-meta-group-venue">
                                                    <h3 class="tribe-events-single-section-title"style="color: white">Information du conducteur</h3>
                                                    <div class="cmsmasters_event_meta_info">

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Nom:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr author fn org" style="color: white">Kindergarten</span>
                                                        </div>

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Depart:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr location tribe-events-address">
                                                    <span class="tribe-address">
                                                        <span class="tribe-street-address" style="color: white">{{ transport.departName }}</span>
                                                    </span>
                                                </span>
                                                        </div>

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Arrivé:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr location tribe-events-address">
                                                    <span class="tribe-address">
                                                        <span class="tribe-street-address" style="color: white">{{ transport.arriveName }}</span>
                                                    </span>
                                                </span>
                                                        </div>

                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">telephone:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr tel" style="color: white">{{ transport.telephone }}</span>
                                                        </div>


                                                    </div>
                                                </div>
                                                <div class="tribe-events-meta-group tribe-events-meta-group-organizer">
                                                    <h3 class="tribe-events-single-section-title" style="color: white">Type de covoiturage</h3>
                                                    <div class="cmsmasters_event_meta_info">
                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Type de covoiturage:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr fn org" style="color: white">{{ transport.type }}</span>
                                                        </div>
                                                        <div class="cmsmasters_event_meta_info_item">
                                                            <span class="cmsmasters_event_meta_info_item_title" style="color: white">Description:</span>
                                                            <span class="cmsmasters_event_meta_info_item_descr tel" style="color: white">{{ transport.description }}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div><!-- #tribe-events -->
                                </div> <!-- #tribe-events-pg-template -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="map" style="width:100%; height:400px"></div>
</div>

    <!-- _________________________ Finish Middle _________________________ -->

    <script>

        var loc1 ='{{ transport.depart }}';
        var loc2 ='{{ transport.arrive }}';
        var directionsDisplay;

        var    directionsService ;

        function initMap() {
            // Create a map object and specify the DOM element for display.
            var map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 36.862499, lng: 10.195556},
                zoom: 8
            });
            directionsService = new google.maps.DirectionsService();
            directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true});
            directionsDisplay.setMap(map);
            getDirections (loc1,loc2);
        }

        markerdep = new google.maps.Marker({
            position: loc2,
            map: map
        });

        function getDirections(loc1,loc2) {

            // ==== Set up the walk and avoid highways options ====
            var request = {};
            request.travelMode = google.maps.DirectionsTravelMode.DRIVING;
            // ==== set the start and end locations ====

            // var saddr = new google.maps.LatLng(loc1.split(',')[0].trim().substr(1,loc1.length), loc1.split(',')[1].trim().substr(0,loc1.length-1));
            //var daddr = new google.maps.LatLng(loc2.split(',')[0].trim().substr(1,loc2.length), loc2.split(',')[1].trim().substr(0,loc2.length-1));

            //request.origin = saddr;
            //request.destination = daddr;

            loc1 = loc1.substring(1, loc1.length-1);
            loc1trim = loc1.trim();
            var result1 = loc1trim.split(",");
            var loc1lat = result1[0];
            var loc1lng = result1[1];

            var saddr = new google.maps.LatLng(loc1lat,loc1lng);
            request.origin = saddr;

            loc2 = loc2.substring(1, loc2.length-1);
            loc1trim = loc2.trim();
            var result2 = loc1trim.split(",");
            var loc2lat = result2[0];
            var loc2lng = result2[1];

            var daddr = new google.maps.LatLng(loc2lat,loc2lng);
            request.destination = daddr;

            //alert(request.origin);
            //alert(request.destination);
            directionsService.route(request, function (response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response);
                } else
                    alert("Directions not found:" + status);
            });

        }

    </script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyDTPdWrqfqni2I2Ex9pOG4ivq8XoeJFuz4&callback=initMap"
            async defer></script>
    {% endblock %}
